{"version":3,"sources":["RealmApp.js","components/Card.js","components/Loading.js","components/LoginScreen.js","graphql/useTaskMutations.js","graphql/useTaskQueries.js","graphql/useTasks.js","components/StatusBadge.js","components/TaskContent.js","components/ButtonGroup.js","components/StatusChange.js","components/useChangeTaskStatusButton.js","components/TaskDetailModal.js","components/EditPermissionsModal.js","components/ProjectScreen.js","graphql/useProjects.js","components/Sidebar.js","TaskApp.js","graphql/RealmApolloProvider.js","App.js","serviceWorker.js","index.js"],"names":["RealmAppContext","React","createContext","useRealmApp","app","useContext","Error","RealmAppProvider","appId","children","useState","Realm","setApp","useEffect","currentUser","setCurrentUser","credentials","a","logIn","logOut","wrapped","Provider","value","Layout","styled","div","Card","props","Loading","size","margin","color","uiColors","gray","dark2","LoginScreen","mode","setMode","email","setEmail","password","setPassword","error","setError","isLoggingIn","setIsLoggingIn","handleLogin","e","emailPassword","handleAuthenticationError","handleRegistrationAndLogin","isValidEmailAddress","validator","isEmail","emailPasswordAuth","registerUser","err","Container","LoginFormRow","LoginHeading","type","label","placeholder","onChange","target","state","errorMessage","variant","onClick","ToggleContainer","ToggleText","ToggleLink","preventDefault","oldMode","parts","message","split","reason","length","trimStart","status","reasonRegex","match","groups","parseAuthenticationError","prevErr","LGCard","span","button","green","light2","h1","useTaskMutations","project","addTask","useAddTask","updateTask","useUpdateTask","deleteTask","useDeleteTask","AddTaskMutation","gql","UpdateTaskMutation","DeleteTaskMutation","TaskFieldsFragment","useMutation","update","cache","addedTask","data","modify","fields","tasks","existingTasks","writeFragment","fragment","addTaskMutation","task","variables","_id","ObjectId","_partition","partition","updateTaskMutation","updates","taskId","updatedTask","deleteTaskMutation","deletedTask","GetAllTasksQuery","useTasks","useQuery","loading","startPolling","stopPolling","useAllTasksInProject","StatusBadge","getColorForStatus","getTaskStatusDisplayName","nbsp","String","fromCharCode","TaskContent","TaskDescription","TaskName","name","ButtonGroup","css","direction","StatusChange","from","to","Button","LGButton","ButtonContent","TaskDetailModal","unselectTask","ChangeTaskStatusButton","fromStatus","toStatus","useChangeTaskStatusButton","open","Boolean","setOpen","EditPermissionsModal","isEditingPermissions","setIsEditingPermissions","teamMembers","setTeamMembers","newUserEmailError","setNewUserEmailError","functions","addTeamMember","removeTeamMember","getMyTeamMembers","updateTeamMembers","then","useTeamMembers","ContentContainer","ModalHeading","ModalText","AddTeamMemberInput","List","map","teamMember","ListItem","key","TeamMemberContainer","TeamMemberName","aria-label","className","inputValue","setInputValue","Row","InputContainer","aria-labelledby","disabled","result","styles","height","h2","p","ul","li","ProjectScreen","currentProject","TaskList","id","selectedTaskId","setSelectedTaskId","selectedTask","find","draftTask","setDraftTask","createDraftTask","deleteDraftTask","setDraftTaskName","submitDraftTask","useDraftTask","TaskListHeader","setProjectsFromChange","change","setProjects","fullDocument","memberOf","Sidebar","setCurrentProject","projects","customData","users","mongoClient","db","collection","changeWatcher","watch","return","useProjects","SidebarContainer","SectionHeading","SectionList","SectionListItem","isSelected","UserDetails","user","handleLogout","handleEditPermissions","light1","UserDetailsContainer","Username","profile","TextButton","TaskApp","gridAreaSidebar","gridAreaMain","createRealmApolloClient","link","HttpLink","uri","fetch","options","refreshCustomData","headers","Authorization","accessToken","InMemoryCache","ApolloClient","RealmApolloProvider","client","setClient","RequireLoggedInUser","App","window","location","hostname","ReactDOM","render","StrictMode","document","getElementById","navigator","serviceWorker","ready","registration","unregister","catch","console"],"mappings":"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","file":"static/js/main.cace4971.chunk.js","sourcesContent":["import React from \"react\";\r\nimport * as Realm from \"realm-web\";\r\n\r\nconst RealmAppContext = React.createContext();\r\n\r\nexport const useRealmApp = () => {\r\n  const app = React.useContext(RealmAppContext);\r\n  if (!app) {\r\n    throw new Error(\r\n      `You must call useRealmApp() inside of a <RealmAppProvider />`\r\n    );\r\n  }\r\n  return app;\r\n};\r\n\r\nexport const RealmAppProvider = ({ appId, children }) => {\r\n  const [app, setApp] = React.useState(new Realm.App(appId));\r\n  React.useEffect(() => {\r\n    setApp(new Realm.App(appId));\r\n  }, [appId]);\r\n  // Wrap the Realm.App object's user state with React state\r\n  const [currentUser, setCurrentUser] = React.useState(app.currentUser);\r\n  async function logIn(credentials) {\r\n    await app.logIn(credentials);\r\n    // If successful, app.currentUser is the user that just logged in\r\n    setCurrentUser(app.currentUser);\r\n  }\r\n  async function logOut() {\r\n    // Log out the currently active user\r\n    await app.currentUser?.logOut();\r\n    // If another user was logged in too, they're now the current user.\r\n    // Otherwise, app.currentUser is null.\r\n    setCurrentUser(app.currentUser);\r\n  }\r\n  const wrapped = { ...app, currentUser, logIn, logOut };\r\n  return (\r\n    <RealmAppContext.Provider value={wrapped}>\r\n      {children}\r\n    </RealmAppContext.Provider>\r\n  );\r\n};\r\n\r\n","import React from \"react\";\r\nimport LGCard from \"@leafygreen-ui/card\";\r\nimport styled from \"@emotion/styled\";\r\n\r\nconst Layout = styled.div`\r\n  padding: 8px;\r\n  color: black;\r\n  display: flex;\r\n  flex-direction: column;\r\n  text-align: left;\r\n`;\r\n\r\nexport default function Card({ children, ...props }) {\r\n  return (\r\n    <LGCard {...props}>\r\n      <Layout>{children}</Layout>\r\n    </LGCard>\r\n  );\r\n}\r\n","import React from \"react\";\r\nimport { uiColors } from \"@leafygreen-ui/palette\";\r\nimport GridLoader from \"react-spinners/GridLoader\";\r\n\r\nexport default function Loading() {\r\n  return <GridLoader size=\"15px\" margin=\"3px\" color={uiColors.gray.dark2} />;\r\n}\r\n","import React from 'react';\r\nimport * as Realm from 'realm-web';\r\nimport { useRealmApp } from '../RealmApp';\r\nimport styled from '@emotion/styled';\r\nimport Button from '@leafygreen-ui/button';\r\nimport TextInput from '@leafygreen-ui/text-input';\r\nimport LGCard from './Card';\r\nimport { uiColors } from '@leafygreen-ui/palette';\r\nimport validator from 'validator';\r\nimport Loading from './Loading';\r\n\r\nexport default function LoginScreen() {\r\n\tconst app = useRealmApp();\r\n\t// Toggle between logging users in and registering new users\r\n\tconst [mode, setMode] = React.useState('login');\r\n\tconst toggleMode = () => {\r\n\t\tsetMode((oldMode) => (oldMode === 'login' ? 'register' : 'login'));\r\n\t};\r\n\t// Keep track of form input state\r\n\tconst [email, setEmail] = React.useState('');\r\n\tconst [password, setPassword] = React.useState('');\r\n\t// Keep track of input validation/errors\r\n\tconst [error, setError] = React.useState({});\r\n\t// Whenever the mode changes, clear the form inputs\r\n\tReact.useEffect(() => {\r\n\t\tsetEmail('sampleemail@example.com');\r\n\t\tsetPassword('password');\r\n\t\tsetError({});\r\n\t}, [mode]);\r\n\r\n\tconst [isLoggingIn, setIsLoggingIn] = React.useState(false);\r\n\tconst handleLogin = async () => {\r\n\t\tsetIsLoggingIn(true);\r\n\t\tsetError((e) => ({ ...e, password: null }));\r\n\t\ttry {\r\n\t\t\tawait app.logIn(Realm.Credentials.emailPassword(email, password));\r\n\t\t} catch (err) {\r\n\t\t\thandleAuthenticationError(err, setError);\r\n\t\t}\r\n\t};\r\n\r\n\tconst handleRegistrationAndLogin = async () => {\r\n\t\tconst isValidEmailAddress = validator.isEmail(email);\r\n\t\tsetError((e) => ({ ...e, password: null }));\r\n\t\tif (isValidEmailAddress) {\r\n\t\t\ttry {\r\n\t\t\t\t// Register the user and, if successful, log them in\r\n\t\t\t\tawait app.emailPasswordAuth.registerUser(email, password);\r\n\t\t\t\treturn await handleLogin();\r\n\t\t\t} catch (err) {\r\n\t\t\t\thandleAuthenticationError(err, setError);\r\n\t\t\t}\r\n\t\t} else {\r\n\t\t\tsetError((err) => ({ ...err, email: 'Email is invalid.' }));\r\n\t\t}\r\n\t};\r\n\r\n\treturn (\r\n\t\t<Container>\r\n\t\t\t{isLoggingIn ? (\r\n\t\t\t\t<Loading />\r\n\t\t\t) : (\r\n\t\t\t\t<Card>\r\n\t\t\t\t\t<LoginFormRow>\r\n\t\t\t\t\t\t<LoginHeading>{mode === 'login' ? 'Log In' : 'Register an Account'}</LoginHeading>\r\n\t\t\t\t\t</LoginFormRow>\r\n\t\t\t\t\t<LoginFormRow>\r\n\t\t\t\t\t\t<TextInput\r\n\t\t\t\t\t\t\ttype=\"email\"\r\n\t\t\t\t\t\t\tlabel=\"Email\"\r\n\t\t\t\t\t\t\tplaceholder=\"your.email@example.com\"\r\n\t\t\t\t\t\t\tonChange={(e) => {\r\n\t\t\t\t\t\t\t\tsetError((e) => ({ ...e, email: null }));\r\n\t\t\t\t\t\t\t\tsetEmail(e.target.value);\r\n\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\tvalue={email}\r\n\t\t\t\t\t\t\tstate={error.email ? 'error' : validator.isEmail(email) ? 'valid' : 'none'}\r\n\t\t\t\t\t\t\terrorMessage={error.email}\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t</LoginFormRow>\r\n\t\t\t\t\t<LoginFormRow>\r\n\t\t\t\t\t\t<TextInput\r\n\t\t\t\t\t\t\ttype=\"password\"\r\n\t\t\t\t\t\t\tlabel=\"Password\"\r\n\t\t\t\t\t\t\tplaceholder=\"pa55w0rd\"\r\n\t\t\t\t\t\t\tonChange={(e) => {\r\n\t\t\t\t\t\t\t\tsetPassword(e.target.value);\r\n\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\tvalue={password}\r\n\t\t\t\t\t\t\tstate={error.password ? 'error' : error.password ? 'valid' : 'none'}\r\n\t\t\t\t\t\t\terrorMessage={error.password}\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t</LoginFormRow>\r\n\t\t\t\t\t{mode === 'login' ? (\r\n\t\t\t\t\t\t<Button variant=\"primary\" onClick={() => handleLogin()}>\r\n\t\t\t\t\t\t\tLog In\r\n\t\t\t\t\t\t</Button>\r\n\t\t\t\t\t) : (\r\n\t\t\t\t\t\t<Button variant=\"primary\" onClick={() => handleRegistrationAndLogin()}>\r\n\t\t\t\t\t\t\tRegister\r\n\t\t\t\t\t\t</Button>\r\n\t\t\t\t\t)}\r\n\t\t\t\t\t<ToggleContainer>\r\n\t\t\t\t\t\t<ToggleText>{mode === 'login' ? \"Don't have an account?\" : 'Already have an account?'}</ToggleText>\r\n\t\t\t\t\t\t<ToggleLink\r\n\t\t\t\t\t\t\tonClick={(e) => {\r\n\t\t\t\t\t\t\t\te.preventDefault();\r\n\t\t\t\t\t\t\t\ttoggleMode();\r\n\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t{mode === 'login' ? 'Register one now.' : 'Log in instead.'}\r\n\t\t\t\t\t\t</ToggleLink>\r\n\t\t\t\t\t</ToggleContainer>\r\n\t\t\t\t</Card>\r\n\t\t\t)}\r\n\t\t</Container>\r\n\t);\r\n}\r\n\r\nfunction handleAuthenticationError(err, setError) {\r\n\tconst { status, message } = parseAuthenticationError(err);\r\n\tconst errorType = message || status;\r\n\tswitch (errorType) {\r\n\t\tcase 'invalid username':\r\n\t\t\tsetError((prevErr) => ({ ...prevErr, email: 'Invalid email address.' }));\r\n\t\t\tbreak;\r\n\t\tcase 'invalid username/password':\r\n\t\tcase 'invalid password':\r\n\t\tcase '401':\r\n\t\t\tsetError((err) => ({ ...err, password: 'Incorrect password.' }));\r\n\t\t\tbreak;\r\n\t\tcase 'name already in use':\r\n\t\tcase '409':\r\n\t\t\tsetError((err) => ({ ...err, email: 'Email is already registered.' }));\r\n\t\t\tbreak;\r\n\t\tcase 'password must be between 6 and 128 characters':\r\n\t\tcase '400':\r\n\t\t\tsetError((err) => ({\r\n\t\t\t\t...err,\r\n\t\t\t\tpassword: 'Password must be between 6 and 128 characters.',\r\n\t\t\t}));\r\n\t\t\tbreak;\r\n\t\tdefault:\r\n\t\t\tbreak;\r\n\t}\r\n}\r\n\r\nfunction parseAuthenticationError(err) {\r\n\tconst parts = err.message.split(':');\r\n\tconst reason = parts[parts.length - 1].trimStart();\r\n\tif (!reason) return { status: '', message: '' };\r\n\tconst reasonRegex = /(?<message>.+)\\s\\(status (?<status>[0-9][0-9][0-9])/;\r\n\tconst match = reason.match(reasonRegex);\r\n\tconst { status, message } = match?.groups ?? {};\r\n\treturn { status, message };\r\n}\r\n\r\nconst Card = styled(LGCard)`\r\n\twidth: 420px;\r\n`;\r\nconst ToggleContainer = styled.div`\r\n\tmargin-top: 8px;\r\n\tfont-size: 12px;\r\n\tdisplay: flex;\r\n\tjustify-content: center;\r\n`;\r\n\r\nconst ToggleText = styled.span`\r\n\tline-height: 18px;\r\n`;\r\n\r\nconst ToggleLink = styled.button`\r\n\tbackground: none;\r\n\tborder: none;\r\n\tfont-size: 12px;\r\n\tcolor: ${uiColors.green.dark2};\r\n`;\r\n\r\nconst Container = styled.div`\r\n\theight: 100vh;\r\n\tjustify-content: center;\r\n\talign-items: center;\r\n\tdisplay: flex;\r\n\tflex-direction: column;\r\n\tbackground: ${uiColors.gray.light2};\r\n`;\r\n\r\nconst LoginHeading = styled.h1`\r\n\tmargin: 0;\r\n\tfont-size: 32px;\r\n`;\r\n\r\nconst LoginFormRow = styled.div`\r\n\tmargin-bottom: 16px;\r\n`;\r\n","import { ObjectId } from \"bson\";\r\nimport { useMutation } from \"@apollo/client\";\r\nimport gql from \"graphql-tag\";\r\n\r\nexport default function useTaskMutations(project) {\r\n  return {\r\n    addTask: useAddTask(project),\r\n    updateTask: useUpdateTask(project),\r\n    deleteTask: useDeleteTask(project),\r\n  };\r\n}\r\n\r\n// TODO: Add the GraphGL mutation for adding a task.\r\nconst AddTaskMutation = gql`\r\n  mutation AddTask($task: TaskInsertInput!) {\r\n    addedTask: insertOneTask(data: $task) {\r\n      _id\r\n      _partition\r\n      name\r\n      status\r\n    }\r\n  }\r\n`;\r\n\r\n// TODO: Add the GraphGL mutation for updating a task.\r\nconst UpdateTaskMutation = gql`\r\n  mutation UpdateTask($taskId: ObjectId!, $updates: TaskUpdateInput!) {\r\n    updatedTask: updateOneTask(query: { _id: $taskId }, set: $updates) {\r\n      _id\r\n      _partition\r\n      name\r\n      status\r\n    }\r\n  }\r\n`;\r\n\r\n// TODO: Add the GraphGL mutation for deleting a task.\r\nconst DeleteTaskMutation = gql`\r\n  mutation DeleteTask($taskId: ObjectId!) {\r\n    deletedTask: deleteOneTask(query: { _id: taskId }) {\r\n      _id\r\n      _partition\r\n      name\r\n      status\r\n    }\r\n  }\r\n`;\r\n\r\nconst TaskFieldsFragment = gql`\r\n  fragment TaskFields on Task {\r\n    _id\r\n    _partition\r\n    status\r\n    name\r\n  }\r\n`;\r\n\r\nfunction useAddTask(project) {\r\n  const [addTaskMutation] = useMutation(AddTaskMutation, {\r\n    // Manually save added Tasks into the Apollo cache so that Task queries automatically update\r\n    // For details, refer to https://www.apollographql.com/docs/react/data/mutations/#making-all-other-cache-updates\r\n    update: (cache, { data: { addedTask } }) => {\r\n      cache.modify({\r\n        fields: {\r\n          tasks: (existingTasks = []) => [\r\n            ...existingTasks,\r\n            cache.writeFragment({\r\n              data: addedTask,\r\n              fragment: TaskFieldsFragment,\r\n            }),\r\n          ],\r\n        },\r\n      });\r\n    },\r\n  });\r\n  const addTask = async (task) => {\r\n    const { addedTask } = await addTaskMutation({\r\n      variables: {\r\n        task: {\r\n          _id: new ObjectId(),\r\n          _partition: project.partition,\r\n          status: \"Open\",\r\n          ...task,\r\n        },\r\n      },\r\n    });\r\n    return addedTask;\r\n  };\r\n  return addTask;\r\n}\r\n\r\nfunction useUpdateTask(project) {\r\n  const [updateTaskMutation] = useMutation(UpdateTaskMutation);\r\n  const updateTask = async (task, updates) => {\r\n    const { updatedTask } = await updateTaskMutation({\r\n      variables: { taskId: task._id, updates },\r\n    });\r\n    return updatedTask;\r\n  };\r\n  return updateTask;\r\n}\r\n\r\nfunction useDeleteTask(project) {\r\n  const [deleteTaskMutation] = useMutation(DeleteTaskMutation);\r\n  const deleteTask = async (task) => {\r\n    const { deletedTask } = await deleteTaskMutation({\r\n      variables: { taskId: task._id },\r\n    });\r\n    return deletedTask;\r\n  };\r\n  return deleteTask;\r\n}\r\n","import React from \"react\";\r\nimport { useQuery } from \"@apollo/client\";\r\nimport gql from \"graphql-tag\";\r\n\r\n// TODO: Add the GraphGL query for fetching all tasks.\r\nconst GetAllTasksQuery = gql`\r\n  query GetAllTasksForProject($partition: String!) {\r\n    tasks(query: { _partition: $partition }) {\r\n      _id\r\n      name\r\n      status\r\n    }\r\n  }\r\n`;\r\n\r\nexport function useAllTasksInProject(project) {\r\n  const {\r\n    data,\r\n    loading,\r\n    error,\r\n    startPolling,\r\n    stopPolling\r\n  } = useQuery(GetAllTasksQuery, {\r\n      variables: {\r\n        partition: project.partition\r\n      },\r\n    }\r\n  );\r\n  React.useEffect(() => {\r\n    // check server for updates every 1000ms\r\n    startPolling(1000);\r\n    // stop polling server for data when component unmounts\r\n    return () => stopPolling();\r\n  }, [startPolling, stopPolling]);\r\n  if (error) {\r\n    throw new Error(`Failed to fetch tasks: ${error.message}`);\r\n  }\r\n  // If the query has finished, return the tasks from the result data\r\n  // Otherwise, return an empty list\r\n  const tasks = data?.tasks ?? [];\r\n  return {\r\n    tasks,\r\n    loading\r\n  };\r\n}\r\n","import useTaskMutations from \"./useTaskMutations\";\r\nimport { useAllTasksInProject } from \"./useTaskQueries\";\r\n\r\nconst useTasks = (project) => {\r\n  const { tasks, loading } = useAllTasksInProject(project);\r\n  const { addTask, updateTask } = useTaskMutations(project);\r\n  return {\r\n    loading,\r\n    tasks,\r\n    updateTask,\r\n    addTask,\r\n  };\r\n};\r\nexport default useTasks;\r\n","import React from \"react\";\r\nimport Badge from \"@leafygreen-ui/badge\";\r\n\r\nexport default function StatusBadge({ status }) {\r\n  return (\r\n    <Badge variant={getColorForStatus(status)}>\r\n      {getTaskStatusDisplayName(status)}\r\n    </Badge>\r\n  );\r\n}\r\n\r\nconst getColorForStatus = (status) => {\r\n  switch (status) {\r\n    case \"Open\":\r\n      return \"blue\";\r\n    case \"InProgress\":\r\n      return \"yellow\";\r\n    case \"Complete\":\r\n      return \"green\";\r\n    default:\r\n      return \"gray\";\r\n  }\r\n};\r\n\r\nconst getTaskStatusDisplayName = (status) => {\r\n  if (status === \"InProgress\") {\r\n    // Add a non-breaking space so that the string is always a single line\r\n    const nbsp = String.fromCharCode(160);\r\n    return `In${nbsp}Progress`;\r\n  }\r\n  return status;\r\n};\r\n","import React from \"react\";\r\nimport styled from \"@emotion/styled\";\r\nimport StatusBadge from \"./StatusBadge\";\r\n\r\nexport default function TaskContent({ task }) {\r\n  return (\r\n    <TaskDescription>\r\n      <TaskName>{task.name}</TaskName>\r\n      <StatusBadge status={task.status} />\r\n    </TaskDescription>\r\n  );\r\n}\r\n\r\nconst TaskDescription = styled.div`\r\n  display: flex;\r\n  width: 100%;\r\n`;\r\nconst TaskName = styled.span`\r\n  flex-grow: 1;\r\n`;\r\n","import styled from \"@emotion/styled\";\r\nimport { css } from \"@emotion/core\";\r\n\r\nconst ButtonGroup = styled.div(\r\n  (props) => css`\r\n    display: flex;\r\n    flex-direction: ${props.direction === \"row\" ? \"row\" : \"column\"};\r\n    justify-content: center;\r\n    gap: 8px;\r\n    margin-top: 8px;\r\n  `\r\n);\r\nexport default ButtonGroup;\r\n","import React from \"react\";\r\nimport styled from \"@emotion/styled\";\r\nimport StatusBadge from \"./StatusBadge\";\r\nimport ArrowRightIcon from \"@leafygreen-ui/icon/dist/ArrowRight\";\r\n\r\nexport default function StatusChange({ from, to }) {\r\n  return (\r\n    <Container>\r\n      <StatusBadge status={from} />\r\n      <ArrowRightIcon />\r\n      <StatusBadge status={to} />\r\n    </Container>\r\n  );\r\n}\r\n\r\nconst Container = styled.div`\r\n  display: flex;\r\n  align-items: center;\r\n  gap: 8px;\r\n`;\r\n","import React from \"react\";\r\nimport styled from \"@emotion/styled\";\r\nimport LGButton from \"@leafygreen-ui/button\";\r\nimport StatusChange from \"./StatusChange\";\r\nimport useTaskMutations from \"../graphql/useTaskMutations\";\r\n\r\n// Use a hook to dynamically create status update buttons for the specified project\r\nexport default function useChangeTaskStatusButton(project) {\r\n  const { updateTask } = useTaskMutations(project);\r\n  const ChangeTaskStatusButton = ({ task, fromStatus, toStatus, children }) => {\r\n    return (\r\n      <Button onClick={() => updateTask(task, { status: toStatus })}>\r\n        <ButtonContent>\r\n          {children}\r\n          <StatusChange from={fromStatus} to={toStatus} />\r\n        </ButtonContent>\r\n      </Button>\r\n    );\r\n  };\r\n  return ChangeTaskStatusButton;\r\n}\r\n\r\nconst Button = styled(LGButton)`\r\n  height: 100%;\r\n`;\r\n\r\nconst ButtonContent = styled.div`\r\n  display: flex;\r\n  flex-direction: column;\r\n  align-items: center;\r\n  padding: 8px 0;\r\n  gap: 8px;\r\n`;\r\n","import React from \"react\";\r\nimport TaskContent from \"./TaskContent\";\r\nimport Modal from \"@leafygreen-ui/modal\";\r\nimport ButtonGroup from \"./ButtonGroup\";\r\nimport useChangeTaskStatusButton from \"./useChangeTaskStatusButton\";\r\n\r\nexport default function TaskDetailModal({ project, task, unselectTask }) {\r\n  const ChangeTaskStatusButton = useChangeTaskStatusButton(project);\r\n  return (\r\n    <Modal\r\n      open={Boolean(task)} // Show the modal if we passed a Task into the task prop.\r\n      setOpen={unselectTask} // When the user tries to close the modal, unset the Task to stop showing the modal\r\n    >\r\n      {task && (\r\n        <>\r\n          <TaskContent task={task} />\r\n          <ButtonGroup direction=\"row\">\r\n            {task.status === \"Open\" && (\r\n              <ChangeTaskStatusButton\r\n                task={task}\r\n                fromStatus=\"Open\"\r\n                toStatus=\"InProgress\"\r\n              >\r\n                Start Progress\r\n              </ChangeTaskStatusButton>\r\n            )}\r\n            {task.status === \"InProgress\" && (\r\n              <>\r\n                <ChangeTaskStatusButton\r\n                  task={task}\r\n                  fromStatus=\"InProgress\"\r\n                  toStatus=\"Open\"\r\n                >\r\n                  Stop Progress\r\n                </ChangeTaskStatusButton>\r\n                <ChangeTaskStatusButton\r\n                  task={task}\r\n                  fromStatus=\"InProgress\"\r\n                  toStatus=\"Complete\"\r\n                >\r\n                  Complete Task\r\n                </ChangeTaskStatusButton>\r\n              </>\r\n            )}\r\n            {task.status === \"Complete\" && (\r\n              <ChangeTaskStatusButton\r\n                task={task}\r\n                fromStatus=\"Complete\"\r\n                toStatus=\"InProgress\"\r\n              >\r\n                Resume Task\r\n              </ChangeTaskStatusButton>\r\n            )}\r\n          </ButtonGroup>\r\n        </>\r\n      )}\r\n    </Modal>\r\n  );\r\n}\r\n","import React from 'react';\r\nimport { css } from '@emotion/core';\r\nimport styled from '@emotion/styled';\r\n\r\nimport LGButton from '@leafygreen-ui/button';\r\nimport Modal from '@leafygreen-ui/modal';\r\nimport XIcon from '@leafygreen-ui/icon/dist/X';\r\nimport PlusIcon from '@leafygreen-ui/icon/dist/Plus';\r\nimport IconButton from '@leafygreen-ui/icon-button';\r\nimport TextInput from '@leafygreen-ui/text-input';\r\nimport { uiColors } from '@leafygreen-ui/palette';\r\nimport { useRealmApp } from '../RealmApp';\r\n\r\nfunction useTeamMembers() {\r\n\tconst [teamMembers, setTeamMembers] = React.useState(null);\r\n\tconst [newUserEmailError, setNewUserEmailError] = React.useState(null);\r\n\tconst app = useRealmApp();\r\n\tconst { addTeamMember, removeTeamMember, getMyTeamMembers } = app.currentUser.functions;\r\n\tconst updateTeamMembers = () => {\r\n\t\tgetMyTeamMembers().then(setTeamMembers);\r\n\t};\r\n\t// display team members on load\r\n\tReact.useEffect(updateTeamMembers, []);\r\n\treturn {\r\n\t\tteamMembers,\r\n\t\terrorMessage: newUserEmailError,\r\n\t\taddTeamMember: async (email) => {\r\n\t\t\tconst { error } = await addTeamMember(email);\r\n\t\t\tif (error) {\r\n\t\t\t\tsetNewUserEmailError(error);\r\n\t\t\t\treturn { error };\r\n\t\t\t} else {\r\n\t\t\t\tupdateTeamMembers();\r\n\t\t\t}\r\n\t\t},\r\n\t\tremoveTeamMember: async (email) => {\r\n\t\t\tawait removeTeamMember(email);\r\n\t\t\tupdateTeamMembers();\r\n\t\t},\r\n\t};\r\n}\r\n\r\nexport default function EditPermissionsModal({ isEditingPermissions, setIsEditingPermissions }) {\r\n\tconst { teamMembers, errorMessage, addTeamMember, removeTeamMember } = useTeamMembers();\r\n\treturn (\r\n\t\t<Modal open={isEditingPermissions} setOpen={setIsEditingPermissions} size=\"small\">\r\n\t\t\t<ContentContainer>\r\n\t\t\t\t<ModalHeading>Team Members</ModalHeading>\r\n\t\t\t\t<ModalText>These users can add, read, modify, and delete tasks in your project</ModalText>\r\n\t\t\t\t<ModalText>Add a new user by email:</ModalText>\r\n\t\t\t\t<AddTeamMemberInput addTeamMember={addTeamMember} errorMessage={errorMessage} />\r\n\t\t\t\t<List>\r\n\t\t\t\t\t{teamMembers?.length ? (\r\n\t\t\t\t\t\tteamMembers.map((teamMember) => {\r\n\t\t\t\t\t\t\treturn (\r\n\t\t\t\t\t\t\t\t<ListItem key={teamMember._id}>\r\n\t\t\t\t\t\t\t\t\t<TeamMemberContainer>\r\n\t\t\t\t\t\t\t\t\t\t<TeamMemberName>{teamMember.name}</TeamMemberName>\r\n\t\t\t\t\t\t\t\t\t\t<IconButton\r\n\t\t\t\t\t\t\t\t\t\t\taria-label=\"remove-team-member-button\"\r\n\t\t\t\t\t\t\t\t\t\t\tclassName=\"remove-team-member-button\"\r\n\t\t\t\t\t\t\t\t\t\t\tonClick={async () => {\r\n\t\t\t\t\t\t\t\t\t\t\t\tawait removeTeamMember(teamMember.name);\r\n\t\t\t\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t\t\t<XIcon />\r\n\t\t\t\t\t\t\t\t\t\t</IconButton>\r\n\t\t\t\t\t\t\t\t\t</TeamMemberContainer>\r\n\t\t\t\t\t\t\t\t</ListItem>\r\n\t\t\t\t\t\t\t);\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t) : (\r\n\t\t\t\t\t\t<ModalText>No team members</ModalText>\r\n\t\t\t\t\t)}\r\n\t\t\t\t</List>\r\n\t\t\t</ContentContainer>\r\n\t\t</Modal>\r\n\t);\r\n}\r\n\r\nfunction AddTeamMemberInput({ addTeamMember, errorMessage }) {\r\n\tconst [inputValue, setInputValue] = React.useState('');\r\n\treturn (\r\n\t\t<Row>\r\n\t\t\t<InputContainer>\r\n\t\t\t\t<TextInput\r\n\t\t\t\t\ttype=\"email\"\r\n\t\t\t\t\taria-labelledby=\"team member email address\"\r\n\t\t\t\t\tplaceholder=\"some.email@example.com\"\r\n\t\t\t\t\tstate={errorMessage ? 'error' : 'none'}\r\n\t\t\t\t\terrorMessage={errorMessage ?? 'Foo'}\r\n\t\t\t\t\tonChange={(e) => {\r\n\t\t\t\t\t\tsetInputValue(e.target.value);\r\n\t\t\t\t\t}}\r\n\t\t\t\t\tvalue={inputValue}\r\n\t\t\t\t/>\r\n\t\t\t</InputContainer>\r\n\t\t\t<Button\r\n\t\t\t\tdisabled={!inputValue}\r\n\t\t\t\tonClick={async () => {\r\n\t\t\t\t\tconst result = await addTeamMember(inputValue);\r\n\t\t\t\t\tif (!result?.error) {\r\n\t\t\t\t\t\tsetInputValue('');\r\n\t\t\t\t\t}\r\n\t\t\t\t}}\r\n\t\t\t\tstyles={{ height: '36px' }}\r\n\t\t\t>\r\n\t\t\t\t<PlusIcon />\r\n\t\t\t\tAdd User\r\n\t\t\t</Button>\r\n\t\t</Row>\r\n\t);\r\n}\r\n\r\nconst Button = styled(LGButton)`\r\n\theight: 36px;\r\n`;\r\n\r\nconst Row = styled.div`\r\n\tdisplay: flex;\r\n\talign-items: end;\r\n`;\r\nconst InputContainer = styled.div`\r\n\tflex-grow: 1;\r\n`;\r\nconst ModalHeading = styled.h2`\r\n\tmargin: 0;\r\n\tfont-size: 24px;\r\n`;\r\nconst ModalText = styled.p`\r\n\tmargin: 8px 2px;\r\n`;\r\n\r\nconst ContentContainer = styled.div`\r\n\tdisplay: flex;\r\n\tflex-direction: column;\r\n`;\r\nconst List = styled.ul`\r\n\tlist-style: none;\r\n\tpadding: 8px 0;\r\n\tmargin: 0;\r\n`;\r\nconst ListItem = styled.li(\r\n\t(props) => css`\r\n\t\tpadding: 8px 12px;\r\n\t\tborder-radius: 8px;\r\n\t\t:hover {\r\n\t\t\tbackground: ${uiColors.gray.light2};\r\n\t\t}\r\n\t`\r\n);\r\nconst TeamMemberContainer = styled.div`\r\n\tdisplay: flex;\r\n\talign-items: center;\r\n`;\r\nconst TeamMemberName = styled.div`\r\n\tflex-grow: 1;\r\n\tpadding: 8px 0;\r\n`;\r\n","import React from \"react\";\r\nimport styled from \"@emotion/styled\";\r\nimport useTasks from \"../graphql/useTasks\";\r\nimport TaskContent from \"./TaskContent\";\r\nimport TaskDetailModal from \"./TaskDetailModal\";\r\nimport EditPermissionsModal from \"./EditPermissionsModal\";\r\nimport Card from \"./Card\";\r\nimport Button from \"@leafygreen-ui/button\";\r\nimport ButtonGroup from \"./ButtonGroup\";\r\nimport TextInput from \"@leafygreen-ui/text-input\";\r\nimport { uiColors } from \"@leafygreen-ui/palette\";\r\n\r\nimport Loading from \"./Loading\";\r\n\r\nexport default function ProjectScreen({\r\n  currentProject,\r\n  isEditingPermissions,\r\n  setIsEditingPermissions,\r\n}) {\r\n  return (\r\n    <Container>\r\n      {currentProject && <TaskList currentProject={currentProject} />}\r\n      <EditPermissionsModal\r\n        isEditingPermissions={isEditingPermissions}\r\n        setIsEditingPermissions={setIsEditingPermissions}\r\n      />\r\n    </Container>\r\n  );\r\n}\r\n\r\nconst Container = styled.div`\r\n  height: 100vh;\r\n  justify-content: center;\r\n  align-items: center;\r\n  display: flex;\r\n  flex-direction: column;\r\n  grid-area: main;\r\n  background: ${uiColors.gray.light2};\r\n`;\r\n\r\nfunction useDraftTask({ addTask }) {\r\n  const [draftTask, setDraftTask] = React.useState(null);\r\n  const createDraftTask = () => {\r\n    setDraftTask({ name: \"\" });\r\n  };\r\n  const deleteDraftTask = () => {\r\n    setDraftTask(null);\r\n  };\r\n  const setDraftTaskName = (name) => {\r\n    setDraftTask({ name });\r\n  };\r\n  const submitDraftTask = async () => {\r\n    await addTask(draftTask);\r\n    setDraftTask(null);\r\n  };\r\n  return {\r\n    draftTask,\r\n    createDraftTask,\r\n    deleteDraftTask,\r\n    setDraftTaskName,\r\n    submitDraftTask,\r\n  };\r\n}\r\n\r\nfunction TaskList({ currentProject }) {\r\n  const { tasks, addTask, loading } = useTasks(currentProject);\r\n  const getTaskById = (id) => tasks.find((task) => task._id === id);\r\n  const [selectedTaskId, setSelectedTaskId] = React.useState(null);\r\n  const selectedTask = getTaskById(selectedTaskId);\r\n\r\n  const {\r\n    draftTask,\r\n    createDraftTask,\r\n    deleteDraftTask,\r\n    setDraftTaskName,\r\n    submitDraftTask,\r\n  } = useDraftTask({ addTask });\r\n\r\n  return loading ? (\r\n    <Loading />\r\n  ) : (\r\n    <>\r\n      <List>\r\n        {tasks.length === 0 ? (\r\n          <TaskListHeader>\r\n            <h1>No Tasks</h1>\r\n            <p>Click the button below to add a task to this project</p>\r\n          </TaskListHeader>\r\n        ) : (\r\n          tasks.map((task) => (\r\n            <ListItem key={task._id}>\r\n              <Card onClick={() => setSelectedTaskId(task._id)}>\r\n                <TaskContent task={task} />\r\n              </Card>\r\n            </ListItem>\r\n          ))\r\n        )}\r\n        {draftTask ? (\r\n          <ListItem>\r\n            <Card>\r\n              <TextInput\r\n                type=\"text\"\r\n                aria-labelledby=\"task description\"\r\n                placeholder=\"Do the dishes\"\r\n                onChange={(e) => {\r\n                  setDraftTaskName(e.target.value);\r\n                }}\r\n                value={draftTask.name}\r\n              />\r\n              <ButtonGroup>\r\n                <Button\r\n                  variant=\"primary\"\r\n                  disabled={!draftTask.name}\r\n                  onClick={() => {\r\n                    submitDraftTask();\r\n                  }}\r\n                >\r\n                  Add\r\n                </Button>\r\n                <Button\r\n                  variant=\"danger\"\r\n                  onClick={() => {\r\n                    deleteDraftTask();\r\n                  }}\r\n                >\r\n                  Cancel\r\n                </Button>\r\n              </ButtonGroup>\r\n            </Card>\r\n          </ListItem>\r\n        ) : (\r\n          <ListItem>\r\n            <Card>\r\n              <Button onClick={() => createDraftTask()}>Add Task</Button>\r\n            </Card>\r\n          </ListItem>\r\n        )}\r\n      </List>\r\n      <TaskDetailModal\r\n        project={currentProject}\r\n        task={selectedTask}\r\n        unselectTask={setSelectedTaskId}\r\n      />\r\n    </>\r\n  );\r\n}\r\n\r\nconst List = styled.ul`\r\n  list-style-type: none;\r\n  padding-left: 0;\r\n  width: 400px;\r\n`;\r\nconst ListItem = styled.li`\r\n  :not(:first-of-type) {\r\n    margin-top: 8px;\r\n  }\r\n`;\r\n\r\nconst TaskListHeader = styled.div`\r\n  line-height: 24px;\r\n  letter-spacing: 0px;\r\n  text-align: center;\r\n  font-size: 16px;\r\n`;\r\n","import { useRealmApp } from '../RealmApp';\r\nimport React from 'react';\r\n\r\n// TODO: Retrieve the current user's projects and assign it to `projects`\r\n// with refresh when their project list is updated.\r\nfunction setProjectsFromChange(change, setProjects) {\r\n\tconst {\r\n\t\tfullDocument: { memberOf },\r\n\t} = change;\r\n\tsetProjects(memberOf);\r\n}\r\n\r\nexport default function useProjects() {\r\n\tconst app = useRealmApp();\r\n\tconst [projects, setProjects] = React.useState(app.currentUser.customData.memberOf);\r\n\tif (!app.currentUser) {\r\n\t\tthrow new Error('Cannot list projects if there is no logged in user.');\r\n\t}\r\n\tconst mongodb = app.currentUser.mongoClient('mongodb-atlas');\r\n\tconst users = mongodb.db('tracker').collection('User');\r\n\r\n\t// set asynchronous event watcher to react to any changes in the users collection\r\n\tReact.useEffect(() => {\r\n\t\tlet changeWatcher;\r\n\t\t(async () => {\r\n\t\t\tchangeWatcher = users.watch();\r\n\t\t\tfor await (const change of changeWatcher) {\r\n\t\t\t\tsetProjectsFromChange(change, setProjects);\r\n\t\t\t}\r\n\t\t})();\r\n\t\t// close connection when component unmounts\r\n\t\treturn () => changeWatcher.return();\r\n\t});\r\n\treturn projects;\r\n}\r\n","import React from \"react\";\r\nimport { css } from \"@emotion/core\";\r\nimport styled from \"@emotion/styled\";\r\nimport { useRealmApp } from \"../RealmApp\";\r\nimport useProjects from \"../graphql/useProjects\";\r\nimport Card from \"./Card\";\r\nimport { uiColors } from \"@leafygreen-ui/palette\";\r\n\r\nexport default function Sidebar({\r\n  currentProject,\r\n  setCurrentProject,\r\n  setIsEditingPermissions,\r\n}) {\r\n  const projects = useProjects();\r\n  const app = useRealmApp();\r\n\r\n  return (\r\n    <SidebarContainer>\r\n      <Card>\r\n        <SectionHeading>Projects</SectionHeading>\r\n        <SectionList>\r\n          {projects.map((project) => (\r\n            <SectionListItem\r\n              key={project.partition}\r\n              onClick={() => setCurrentProject(project)}\r\n              isSelected={project.partition === currentProject?.partition}\r\n            >\r\n              {project.name}\r\n            </SectionListItem>\r\n          ))}\r\n        </SectionList>\r\n        <UserDetails\r\n          user={app.currentUser}\r\n          handleLogout={() => {\r\n            app.logOut();\r\n          }}\r\n          handleEditPermissions={() => {\r\n            setIsEditingPermissions(true);\r\n          }}\r\n        />\r\n      </Card>\r\n    </SidebarContainer>\r\n  );\r\n}\r\n\r\nconst SidebarContainer = styled.div`\r\n  display: flex;\r\n  background: ${uiColors.gray.light2};\r\n  flex-direction: column;\r\n  padding: 40px;\r\n`;\r\n\r\nconst SectionHeading = styled.h2`\r\n  margin: 0;\r\n  padding: 8px;\r\n`;\r\nconst SectionList = styled.ul`\r\n  list-style: none;\r\n  padding: 0;\r\n  margin: 0;\r\n`;\r\nconst SectionListItem = styled.li(\r\n  (props) => css`\r\n    padding: 8px 12px;\r\n    border-radius: 8px;\r\n    background: ${props.isSelected && uiColors.green.light2};\r\n    :hover {\r\n      background: ${!props.isSelected && uiColors.gray.light1};\r\n    }\r\n  `\r\n);\r\n\r\nfunction UserDetails({ user, handleLogout, handleEditPermissions }) {\r\n  return (\r\n    <UserDetailsContainer>\r\n      <Username>{user.profile.email}</Username>\r\n      <TextButton onClick={handleEditPermissions}>Manage My Project</TextButton>\r\n      <TextButton onClick={handleLogout}>Log Out</TextButton>\r\n    </UserDetailsContainer>\r\n  );\r\n}\r\n\r\nconst UserDetailsContainer = styled.div`\r\n  padding: 8px 0;\r\n  display: flex;\r\n  flex-direction: column;\r\n`;\r\n\r\nconst Username = styled.div`\r\n  font-weight: bold;\r\n  text-align: center;\r\n  margin-bottom: 4px;\r\n`;\r\n\r\nconst TextButton = styled.button`\r\n  background: none;\r\n  border: none;\r\n  padding: 4px;\r\n  color: #069;\r\n  text-decoration: none;\r\n  cursor: pointer;\r\n  color: ${uiColors.green.dark2};\r\n`;\r\n","import React from \"react\";\r\nimport { css } from \"@emotion/core\";\r\nimport styled from \"@emotion/styled\";\r\nimport { useRealmApp } from \"./RealmApp\";\r\nimport ProjectScreen from \"./components/ProjectScreen\";\r\nimport Sidebar from \"./components/Sidebar\";\r\n\r\nexport default function TaskApp() {\r\n  const app = useRealmApp();\r\n  const [currentProject, setCurrentProject] = React.useState(\r\n    // set the current project as  \"My Project\"\r\n    app.currentUser.customData.memberOf[0]\r\n  );\r\n  const [isEditingPermissions, setIsEditingPermissions] = React.useState(false);\r\n  return (\r\n    <Container>\r\n      <Sidebar\r\n        css={gridAreaSidebar}\r\n        currentProject={currentProject}\r\n        setCurrentProject={setCurrentProject}\r\n        setIsEditingPermissions={setIsEditingPermissions}\r\n      ></Sidebar>\r\n      <ProjectScreen\r\n        css={gridAreaMain}\r\n        currentProject={currentProject}\r\n        isEditingPermissions={isEditingPermissions}\r\n        setIsEditingPermissions={setIsEditingPermissions}\r\n      />\r\n    </Container>\r\n  );\r\n}\r\n\r\nconst sidebarWidth = \"420px\";\r\nconst Container = styled.div`\r\n  box-sizing: border-box;\r\n  height: 100vh;\r\n  width: 100vh;\r\n  display: grid;\r\n  grid-template-columns: ${sidebarWidth} calc(100vw - ${sidebarWidth});\r\n  grid-template-rows: 1fr;\r\n  grid-template-areas: \"sidebar main\";\r\n`;\r\n\r\nconst gridAreaSidebar = css`\r\n  grid-area: sidebar;\r\n`;\r\nconst gridAreaMain = css`\r\n  grid-area: sidebar;\r\n`;\r\n","import React from \"react\";\r\nimport { useRealmApp } from \"../RealmApp\";\r\nimport {\r\n  ApolloClient,\r\n  HttpLink,\r\n  InMemoryCache,\r\n  ApolloProvider,\r\n} from \"@apollo/client\";\r\n\r\n// Create an ApolloClient that connects to the provided Realm.App's GraphQL API\r\nconst createRealmApolloClient = (app) => {\r\n  const link = new HttpLink({\r\n    // Realm apps use a standard GraphQL endpoint, identified by their App ID\r\n    uri: `https://realm.mongodb.com/api/client/v2.0/app/${app.id}/graphql`,\r\n    // A custom fetch handler adds the logged in user's access token to GraphQL requests\r\n    fetch: async (uri, options) => {\r\n      if (!app.currentUser) {\r\n        throw new Error(`Must be logged in to use the GraphQL API`);\r\n      }\r\n      // Refreshing a user's custom data also refreshes their access token\r\n      await app.currentUser.refreshCustomData();\r\n      // The handler adds a bearer token Authorization header to the otherwise unchanged request\r\n      options.headers.Authorization = `Bearer ${app.currentUser.accessToken}`;\r\n      return fetch(uri, options);\r\n    },\r\n  });\r\n  const cache = new InMemoryCache();\r\n  return new ApolloClient({ link, cache });\r\n};\r\n\r\nexport default function RealmApolloProvider({ children }) {\r\n  const app = useRealmApp();\r\n  const [client, setClient] = React.useState(createRealmApolloClient(app));\r\n  React.useEffect(() => {\r\n    setClient(createRealmApolloClient(app));\r\n  }, [app]);\r\n  return <ApolloProvider client={client}>{children}</ApolloProvider>;\r\n}","import React from \"react\";\r\nimport LoginScreen from \"./components/LoginScreen\";\r\nimport TaskApp from \"./TaskApp\";\r\nimport RealmApolloProvider from \"./graphql/RealmApolloProvider\";\r\nimport { useRealmApp, RealmAppProvider } from \"./RealmApp\";\r\n\r\nexport const APP_ID = \"ex3-ejuun\";\r\n\r\nconst RequireLoggedInUser = ({ children }) => {\r\n  // Only render children if there is a logged in user.\r\n  const app = useRealmApp();\r\n  return app.currentUser ? children : <LoginScreen />;\r\n};\r\n\r\n\r\nexport default function App() {\r\n  return (\r\n    <RealmAppProvider appId={APP_ID}>\r\n      <RequireLoggedInUser>\r\n        <RealmApolloProvider>\r\n          <TaskApp />\r\n        </RealmApolloProvider>\r\n      </RequireLoggedInUser>\r\n    </RealmAppProvider>\r\n  );\r\n}\r\n","// This optional code is used to register a service worker.\r\n// register() is not called by default.\r\n\r\n// This lets the app load faster on subsequent visits in production, and gives\r\n// it offline capabilities. However, it also means that developers (and users)\r\n// will only see deployed updates on subsequent visits to a page, after all the\r\n// existing tabs open on the page have been closed, since previously cached\r\n// resources are updated in the background.\r\n\r\n// To learn more about the benefits of this model and instructions on how to\r\n// opt-in, read https://bit.ly/CRA-PWA\r\n\r\nconst isLocalhost = Boolean(\r\n  window.location.hostname === \"localhost\" ||\r\n    // [::1] is the IPv6 localhost address.\r\n    window.location.hostname === \"[::1]\" ||\r\n    // 127.0.0.0/8 are considered localhost for IPv4.\r\n    window.location.hostname.match(\r\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\r\n    )\r\n);\r\n\r\nexport function register(config) {\r\n  if (process.env.NODE_ENV === \"production\" && \"serviceWorker\" in navigator) {\r\n    // The URL constructor is available in all browsers that support SW.\r\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\r\n    if (publicUrl.origin !== window.location.origin) {\r\n      // Our service worker won't work if PUBLIC_URL is on a different origin\r\n      // from what our page is served on. This might happen if a CDN is used to\r\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\r\n      return;\r\n    }\r\n\r\n    window.addEventListener(\"load\", () => {\r\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\r\n\r\n      if (isLocalhost) {\r\n        // This is running on localhost. Let's check if a service worker still exists or not.\r\n        checkValidServiceWorker(swUrl, config);\r\n\r\n        // Add some additional logging to localhost, pointing developers to the\r\n        // service worker/PWA documentation.\r\n        navigator.serviceWorker.ready.then(() => {\r\n          console.log(\r\n            \"This web app is being served cache-first by a service \" +\r\n              \"worker. To learn more, visit https://bit.ly/CRA-PWA\"\r\n          );\r\n        });\r\n      } else {\r\n        // Is not localhost. Just register service worker\r\n        registerValidSW(swUrl, config);\r\n      }\r\n    });\r\n  }\r\n}\r\n\r\nfunction registerValidSW(swUrl, config) {\r\n  navigator.serviceWorker\r\n    .register(swUrl)\r\n    .then((registration) => {\r\n      registration.onupdatefound = () => {\r\n        const installingWorker = registration.installing;\r\n        if (installingWorker == null) {\r\n          return;\r\n        }\r\n        installingWorker.onstatechange = () => {\r\n          if (installingWorker.state === \"installed\") {\r\n            if (navigator.serviceWorker.controller) {\r\n              // At this point, the updated precached content has been fetched,\r\n              // but the previous service worker will still serve the older\r\n              // content until all client tabs are closed.\r\n              console.log(\r\n                \"New content is available and will be used when all \" +\r\n                  \"tabs for this page are closed. See https://bit.ly/CRA-PWA.\"\r\n              );\r\n\r\n              // Execute callback\r\n              if (config && config.onUpdate) {\r\n                config.onUpdate(registration);\r\n              }\r\n            } else {\r\n              // At this point, everything has been precached.\r\n              // It's the perfect time to display a\r\n              // \"Content is cached for offline use.\" message.\r\n              console.log(\"Content is cached for offline use.\");\r\n\r\n              // Execute callback\r\n              if (config && config.onSuccess) {\r\n                config.onSuccess(registration);\r\n              }\r\n            }\r\n          }\r\n        };\r\n      };\r\n    })\r\n    .catch((error) => {\r\n      console.error(\"Error during service worker registration:\", error);\r\n    });\r\n}\r\n\r\nfunction checkValidServiceWorker(swUrl, config) {\r\n  // Check if the service worker can be found. If it can't reload the page.\r\n  fetch(swUrl, {\r\n    headers: { \"Service-Worker\": \"script\" },\r\n  })\r\n    .then((response) => {\r\n      // Ensure service worker exists, and that we really are getting a JS file.\r\n      const contentType = response.headers.get(\"content-type\");\r\n      if (\r\n        response.status === 404 ||\r\n        (contentType != null && contentType.indexOf(\"javascript\") === -1)\r\n      ) {\r\n        // No service worker found. Probably a different app. Reload the page.\r\n        navigator.serviceWorker.ready.then((registration) => {\r\n          registration.unregister().then(() => {\r\n            window.location.reload();\r\n          });\r\n        });\r\n      } else {\r\n        // Service worker found. Proceed as normal.\r\n        registerValidSW(swUrl, config);\r\n      }\r\n    })\r\n    .catch(() => {\r\n      console.log(\r\n        \"No internet connection found. App is running in offline mode.\"\r\n      );\r\n    });\r\n}\r\n\r\nexport function unregister() {\r\n  if (\"serviceWorker\" in navigator) {\r\n    navigator.serviceWorker.ready\r\n      .then((registration) => {\r\n        registration.unregister();\r\n      })\r\n      .catch((error) => {\r\n        console.error(error.message);\r\n      });\r\n  }\r\n}\r\n","import React from \"react\";\r\nimport ReactDOM from \"react-dom\";\r\nimport \"./index.css\";\r\nimport App from \"./App\";\r\nimport * as serviceWorker from \"./serviceWorker\";\r\n\r\nReactDOM.render(\r\n  <React.StrictMode>\r\n    <App />\r\n  </React.StrictMode>,\r\n  document.getElementById(\"root\")\r\n);\r\n\r\n// If you want your app to work offline and load faster, you can change\r\n// unregister() to register() below. Note this comes with some pitfalls.\r\n// Learn more about service workers: https://bit.ly/CRA-PWA\r\nserviceWorker.unregister();\r\n"],"sourceRoot":""}